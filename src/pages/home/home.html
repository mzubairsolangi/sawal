<ion-header>
  <ion-navbar>
    <ion-title>Sawal</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>

  <ion-row>
    <ion-col col-12 text-center>
      <img src="assets/imgs/logo.png"  width="100px" text-center alt="Logo">
    </ion-col>

    <!-- user identity section -->
    <ion-col col-12>

      <!-- while busy checking device-id account-->
      <h4 text-center="" *ngIf="fetching">
        <span>Please wait a sec </span> <ion-spinner name="dots"></ion-spinner>
      </h4>

      <!-- user found already-->
      <h4 class="welcome-section" *ngIf="!fetching && userName">Welcome, <strong>{{userName}}</strong> !</h4>

      <!-- if new user - register first -->
      <div *ngIf="!fetching && !userName" class="register-section">
        <ion-list>
          <ion-item>
            <ion-input class="" max="12" min="3"
                       placeholder="Please enter your name"
                       [attr.disabled]="registering"
                       [(ngModel)]="newUserName"></ion-input>
          </ion-item>
        </ion-list>
        <button ion-button full color="secondary" (click)="registerUser()">
          Register
          <ion-spinner *ngIf="registering" name="dots"></ion-spinner>
        </button>
      </div>

    </ion-col>

    <!-- channel joining section -->
    <ion-col col-12 *ngIf="!fetching && userName" class="channel-section">
      <ion-list>
        <ion-item>
          <ion-input class="" max="4" min="4"
                     placeholder="Enter Channel Code (4 Digits)"
                     [attr.disabled]="joining"
                     [(ngModel)]="channelCode"></ion-input>
        </ion-item>
      </ion-list>
      <button ion-button full color="primary" (click)="joinChannel()">
        Join
        <ion-spinner *ngIf="joining" name="dots"></ion-spinner>
      </button>
    </ion-col>

  </ion-row>

</ion-content>

